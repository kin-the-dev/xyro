!function(f,i){"use strict";ips.controller.register("core.front.core.navBar",{_defaultItem:null,_usingSubBars:!0,initialize:function(){var a=i.debounce(this.resizeWindow,300);if(this.on(window,"resize",a),this.on("mouseleave",this.mouseOutScope),this.on("mouseenter",this.mouseEnterScope),f("body").attr("data-controller")&&-1!=f("body").attr("data-controller").indexOf("core.global.customization.visualLang")){var e=this;f("body").on("vleDone",function(){e.setup()})}else this.setup()},setup:function(){this.scope.identify(),this.scope.find('[data-role="secondaryNavBar"]').length<2&&(this._usingSubBars=!1),this._usingSubBars&&1<this.scope.find(".ipsNavBar_secondary > li.ipsNavBar_active").length&&f.each(this.scope.find(".ipsNavBar_secondary > li.ipsNavBar_active"),function(a,e){f(e).find("a[data-ipsmenu]").length&&f(e).removeClass("ipsNavBar_active")}),this._usingSubBars||this.scope.find("#elNavigationMore_dropdown").append(" <i class='fa fa-caret-down'></i>").after(this.scope.find("#elNavigationMore_more_dropdown_menu").attr("id","elNavigationMore_dropdown_menu")),this._usingSubBars&&(ips.utils.events.isTouchDevice()?this.on("click",'[data-role="primaryNavBar"] > li > a',this.intentOver):this.scope.hoverIntent(i.bind(this.intentOver,this),f.noop,'[data-role="primaryNavBar"] > li')),this._defaultItem=this.scope.find('[data-role="primaryNavBar"] > li > [data-navDefault]').attr("data-navitem-id"),this._mushAllMenus()},mouseOutScope:function(){var a=this;ips.utils.events.isTouchDevice()||(this._mouseOutTimer=setTimeout(function(){a._makeDefaultActive(),a.scope.find("[data-ipsMenu]").trigger("closeMenu")},500))},mouseEnterScope:function(){clearTimeout(this._mouseOutTimer)},intentOver:function(a){var e=f(a.currentTarget),i=e.find("> a"),t=this.scope.find('[data-role="primaryNavBar"] > li');e.is("a")&&(i=(e=e.closest("li")).find("> a")),ips.utils.events.isTouchDevice()&&e.hasClass("ipsNavBar_active")||(ips.utils.events.isTouchDevice()&&a.preventDefault(),this.scope.find("[data-ipsMenu]").trigger("closeMenu"),t.removeClass("ipsNavBar_active").find("> a").removeAttr("data-active"),e.addClass("ipsNavBar_active"),i.attr("data-active",!0))},resizeWindow:function(){this._mushAllMenus()},_makeDefaultActive:function(){var a=this.scope.find('[data-navitem-id="'+this._defaultItem+'"]'),e=a.closest("li");this.scope.find('[data-role="primaryNavBar"] > li').removeClass("ipsNavBar_active").find("> a").removeAttr("data-active"),e.addClass("ipsNavBar_active").find("> a").attr("data-active",!0),a.closest('[data-role="secondaryNavBar"]').length&&a.closest('[data-role="secondaryNavBar"]').closest("li").addClass("ipsNavBar_active").find("> a").attr("data-active",!0)},_mushMenu:function(l,a){var p=this,e=parseInt(this.scope.css("padding-left"))+parseInt(this.scope.css("padding-right")),u=this._getNavElement().width()-a-e,i=l.find('> [data-role="navMore"]'),c=i.outerWidth(),t=l.find('> li[data-role="navBarItem"]'),v=0,h=l.find('[data-role="moreDropdown"]');i.is(":visible")||(c=i.removeClass("ipsHide").outerWidth(),i.addClass("ipsHide")),t.each(function(){var a=f(this),e=0;if(a.attr("data-originalWidth"))e=parseInt(a.attr("data-originalWidth"));else{var i=a.outerWidth()+parseInt(a.css("margin-right"))+parseInt(a.css("margin-left"));a.attr("data-originalWidth",i),e=i}if(u<v+e+c){if(!a.attr("data-mushed")){var t=f("<li/>").attr("data-originalItem",a.identify().attr("id")).append(a.contents());if(p._usingSubBars)if(l.is('[data-role="primaryNavBar"]')){if(l.find('> [data-role="navMore"] > [data-role="secondaryNavBar"]').prepend(t),t.find('> [data-role="secondaryNavBar"] > li').length){var s=t.find("> a"),n=f("<ul/>").addClass("ipsMenu ipsMenu_auto ipsHide").attr("id",s.identify().attr("id")+"_menu").attr("data-mushedDropdown",a.identify().attr("id"));t.find('> [data-role="secondaryNavBar"] > li').each(function(){if(!f(this).is('[data-role="navMore"]')){var a=f("<li/>").addClass("ipsMenu_item");f(this).find(".ipsMenu").length&&a.addClass("ipsMenu_subItems"),n.append(a.append(f(this).contents()).attr("data-originalItem",f(this).identify().attr("id")))}}),s.attr("data-ipsMenu","").attr("data-ipsMenu-appendTo","#"+p.scope.identify().attr("id")).append("<i class='fa fa-caret-down' data-role='mushedCaret'></i>"),t.append(n)}}else t.addClass("ipsMenu_item"),t.find(".ipsMenu").length&&t.addClass("ipsMenu_subItems"),h.append(t);else p.scope.find("#elNavigationMore_dropdown_menu").append(t.addClass("ipsMenu_item")),t.find(".ipsMenu").length&&t.addClass("ipsMenu_subItems");var r=t.children("a");r.is("[data-ipsMenu]")&&r.attr("data-ipsMenu-appendTo","#"+t.identify().attr("id")),a.addClass("ipsHide").attr("data-mushed",!0)}}else if(a.attr("data-mushed")){var d=null;if((d=(p._usingSubBars?l.is('[data-role="primaryNavBar"]')?l.find('> [data-role="navMore"] > [data-role="secondaryNavBar"]'):h:p.scope.find("#elNavigationMore_dropdown_menu")).find('[data-originalItem="'+a.identify().attr("id")+'"]')).children("a").is("[data-ipsMenu]")&&d.children("a").attr("data-ipsMenu-appendTo","#"+a.identify().attr("id")),d.length&&a.append(d.contents()).removeClass("ipsHide"),p._usingSubBars&&l.is('[data-role="primaryNavBar"]')){var o=p.scope.find('[data-mushedDropdown="'+a.attr("id")+'"]');a.find('> [data-role="secondaryNavBar"]');o.length&&(o.find("> .ipsMenu_item").each(function(){p.scope.find("#"+f(this).attr("data-originalItem")).append(f(this).contents())}),o.remove()),a.find('[data-role="mushedCaret"]').remove()}d.remove(),a.removeAttr("data-mushed")}v+=e}),l.is('[data-role="primaryNavBar"]')?this._usingSubBars?i.toggleClass("ipsHide",l.find('> [data-role="navMore"] > [data-role="secondaryNavBar"] > li').length<=1):i.toggleClass("ipsHide",!this.scope.find("#elNavigationMore_dropdown_menu > li").length):i.toggleClass("ipsHide",h.find("> li").length<1),this._makeDefaultActive()},_mushAllMenus:function(){this._mushMenu(this.scope.find('[data-role="primaryNavBar"]'),this.scope.find("#social-icons").outerWidth()),this._mushMenu(this.scope.find('[data-role="secondaryNavBar"]:visible'),0)},_getNavElement:function(){return this.scope.hasClass("ipsNavBar_primary")?this.scope:this.scope.find(".ipsNavBar_primary")}})}(jQuery,_);